<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrueHate</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='images/logadao.png') }}">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="{{ url_for('index') }}" class="logo-link">
                    <div class="logo-container">
                        <span class="logo-text">TrueHate</span>
                        <img src="{{ url_for('static', filename='images/logadao.png') }}" alt="Logo TrueHate" class="logo-img">
                    </div>
                </a>
            </div>

            {% if session.get('logado') %}
            <!-- =============================== -->
            <!-- USU√ÅRIO LOGADO -->
            <!-- =============================== -->

            <!-- Hamburguer -->
            <input type="checkbox" id="menu-toggle" class="menu-toggle">

            <!-- Bot√£o Hamburguer -->
            <label for="menu-toggle" class="hamburger-btn">
                <span class="hamburger-line line1"></span>
                <span class="hamburger-line line2"></span>
                <span class="hamburger-line line3"></span>
            </label>

            <!-- Overlay para fechar -->
            <label for="menu-toggle" class="menu-overlay"></label>

            <!-- Menu lateral (Hamburguer) -->
            <ul class="sidebar-menu">
                {% if request.endpoint != 'index' %}
                    <li><a href="{{ url_for('index') }}"> In√≠cio</a></li>
                {% endif %}

                {% if session.get('inadmin') == 1 %}
                    <li class="separator"></li>
                    <li class="submenu-parent">
                        <a href="#"> Administrador</a>
                        <ul class="submenu">
                            <li><a href="{{ url_for('administrador') }}"> Gerenciar Permiss√µes</a></li>
                            <li><a href="{{ url_for('listusuario') }}"> Listar/Editar Usu√°rios</a></li>
                            <li><a href="{{ url_for('historico_admin') }}"> Hist√≥rico Completo</a></li>

                            <!-- ============================= -->
                            <!-- NOVO: Ver Problemas Reportados -->
                            <!-- ============================= -->
                            <li><a href="{{ url_for('admin_problemas') }}"> Problemas Reportados</a></li>
                        </ul>
                    </li>
                    
                    
                    <li><a href="{{ url_for('meu_historico') }}"> Meu Hist√≥rico</a></li>
                    <li class="separator"></li>
                    <li><a href="{{ url_for('logout') }}"> Sair</a></li>

                {% elif session.get('inadmin') == 2 %}
                    <li><a href="{{ url_for('meu_historico') }}"> Hist√≥rico da Empresa</a></li>
                    <li class="separator"></li>
                    <li><a href="{{ url_for('logout') }}"> Sair</a></li>

                {% else %}
                    <li><a href="{{ url_for('meu_historico') }}"> Meu Hist√≥rico</a></li>
                    <li class="separator"></li>
                    <li><a href="{{ url_for('logout') }}"> Sair</a></li>
                {% endif %}
            </ul>

            <!-- Menu superior -->
            <ul class="top-menu">
                {% if session.get('inadmin') == 1 %}
                    <li><a href="{{ url_for('nova_avaliacao') }}">Fazer Avalia√ß√£o</a></li>
                    <li><a href="{{ url_for('listar_avaliacoes') }}">Ver Avalia√ß√µes</a></li>
                    <div class="mini-user">
                        <img src="{{ url_for('static', filename='images/usericon.png') }}" class="mini-user-photo">

                        <span class="mini-user-text">
                            Ol√°, {{ session.get('usuario') 
                                or session.get('nome') 
                                or session.get('user') 
                                or '' }}
                        </span>

                        <span class="mini-user-arrow">‚ñæ</span>

                        <ul class="mini-user-dropdown">
                            <li><a href="{{ url_for('perfil') }}"> Seu Perfil</a></li>
                            <li><a href="{{ url_for('editar') }}"> Editar Perfil</a></li>
                        </ul>
                    </div>
                {% elif session.get('inadmin') == 2 %}
                    <li><a href="{{ url_for('listar_avaliacoes') }}">Ver Avalia√ß√µes</a></li>
                    <div class="mini-user">
                        <img src="{{ url_for('static', filename='images/usericon.png') }}" class="mini-user-photo">

                        <span class="mini-user-text">
                            Ol√°, {{ session.get('usuario') 
                                or session.get('nome') 
                                or session.get('user') 
                                or '' }}
                        </span>

                        <span class="mini-user-arrow">‚ñæ</span>

                        <ul class="mini-user-dropdown">
                            <li><a href="{{ url_for('perfil') }}"> Seu Perfil</a></li>
                            <li><a href="{{ url_for('editar') }}"> Editar Perfil</a></li>
                        </ul>
                    </div>
                {% else %}
                    <li><a href="{{ url_for('nova_avaliacao') }}">Fazer Avalia√ß√£o</a></li>
                    <li><a href="{{ url_for('listar_avaliacoes') }}">Ver Avalia√ß√µes</a></li>
                    <div class="mini-user">
                        <img src="{{ url_for('static', filename='images/usericon.png') }}" class="mini-user-photo">

                        <span class="mini-user-text">
                            Ol√°, {{ session.get('usuario') 
                                or session.get('nome') 
                                or session.get('user') 
                                or '' }}
                        </span>

                        <span class="mini-user-arrow">‚ñæ</span>

                        <ul class="mini-user-dropdown">
                            <li><a href="{{ url_for('perfil') }}"> Seu Perfil</a></li>
                            <li><a href="{{ url_for('editar') }}">Editar Perfil</a></li>
                        </ul>
                    </div>
                {% endif %}
            </ul>

            {% else %}
            <!-- =============================== -->
            <!-- USU√ÅRIO N√ÉO LOGADO -->
            <!-- =============================== -->
            <ul class="top-menu">
                <li><a href="{{ url_for('usuario') }}">Cadastrar</a></li>
                <li><a href="{{ url_for('login') }}">Login</a></li>
                <li><a href="{{ url_for('nova_avaliacao') }}">Fazer Avalia√ß√£o (An√¥nimo)</a></li>
                <li><a href="{{ url_for('listar_avaliacoes') }}">Ver Avalia√ß√µes</a></li>
            </ul>
            {% endif %}
        </nav>
    </header>

    <!-- Flash messages -->
    <div class="flash-messages-container">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                {% set cls = (
                    'success' if category == 'sucesso' else
                    'error' if category == 'erro' else
                    'warning' if category == 'aviso' else
                    'info' if category == 'info' else
                    category
                ) %}
                <div class="flash-message flash-{{ cls }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        {% endwith %}
    </div>

    <main class="container">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="footer">
        <div class="footer-container">

            <div class="footer-col">
                <h3><a href="/sobre">>Sobre<</a></h3>
                <p>Saiba mais sobre o projeto True Hate e sua proposta.</p>
            </div>

            <div class="footer-col">
                <h3>Contato</h3>
                <p>Telefone: <a href="tel:+5547999211795">(47) 9921-1795</a></p>
                <a href="mailto:truehateofc@gmail.com">üìß truehateofc@gmail.com</a>
            </div>

            <div class="footer-col">
                <h3>Desenvolvido por:</h3>
                - Carlos Duhring<br>
                - Eloisa Alencar<br>
                - Heitor Medardo<br>
                - Arthur Iantas Stelzner
            </div>

            <!-- ============================= -->
            <!-- NOVO: LINK DE RELATAR PROBLEMA -->
            <!-- ============================= -->
            <div class="footer-col">
                <h3><a href="{{ url_for('relatar_problema') }}">>Relatar Problema<</a></h3>
                <p>Encontrou um bug ou quer sugerir algo?</p>
            </div>

        </div>
    </footer>

</body>
</html>

{% extends "base.html" %}

{% block content %}
<!-- Se√ß√£o para Usu√°rios Normais (inadmin=0 ou None) -->
<section class="lista-container">
    <div class="titulo-lista">
        <h2>üë§ Usu√°rios Normais</h2>
    </div>

    {% set usuarios_normais = [] %}
    {% for item in dados %}
        {% if item.inadmin == 0 or item.inadmin == None or item.inadmin is not defined or item.inadmin == '' %}
            {% set _ = usuarios_normais.append(item) %}
        {% endif %}
    {% endfor %}
    
    {% if usuarios_normais %}
        <div class="tabela-wrapper">
            <table class="tabela-dados">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>E-mail</th>
                        <th>Criado em</th>
                        <th>Senha</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in usuarios_normais %}
                        <tr>
                            <td>{{ item.id }}</td>
                            <td>{{ item.nome }}</td>
                            <td>{{ item.email }}</td>
                            <td>{{ item.criado_em }}</td>
                            <td>{{ item.senha }}</td>
                            <td class="celula-acoes">
                                <a href="{{ url_for('editar_usuario', usuario_id=item.id) }}" class="btn-editar">Editar</a>
                                <a href="{{ url_for('excluir_usuario', id=item.id) }}" 
                                    class="btn-excluir" 
                                    onclick="return confirm('Tem certeza que deseja excluir este usu√°rio?');">Excluir</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="sem-dados">Nenhum usu√°rio normal cadastrado.</p>
    {% endif %}
</section>

<!-- Se√ß√£o para Empresas (inadmin=2) -->
<section class="lista-container">
    <div class="titulo-lista">
        <h2>üè¢ Empresas</h2>
    </div>

    {% set empresas = [] %}
    {% for item in dados %}
        {% if item.inadmin == 2 %}
            {% set _ = empresas.append(item) %}
        {% endif %}
    {% endfor %}
    
    {% if empresas %}
        <div class="tabela-wrapper">
            <table class="tabela-dados">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>E-mail</th>
                        <th>Criado em</th>
                        <th>Senha</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in empresas %}
                        <tr>
                            <td>{{ item.id }}</td>
                            <td>{{ item.nome }}</td>
                            <td>{{ item.email }}</td>
                            <td>{{ item.criado_em }}</td>
                            <td>{{ item.senha }}</td>
                            <td class="celula-acoes">
                                <a href="{{ url_for('editar_usuario', usuario_id=item.id) }}" class="btn-editar">Editar</a>
                                <a href="{{ url_for('excluir_usuario', id=item.id) }}" 
                                    class="btn-excluir" 
                                    onclick="return confirm('Tem certeza que deseja excluir esta empresa?');">Excluir</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="sem-dados">Nenhuma empresa cadastrada.</p>
    {% endif %}
</section>

<!-- Se√ß√£o para Administradores (inadmin=1) -->
<section class="lista-container">
    <div class="titulo-lista">
        <h2>üëë Administradores</h2>
    </div>

    {% set administradores = [] %}
    {% for item in dados %}
        {% if item.inadmin == 1 %}
            {% set _ = administradores.append(item) %}
        {% endif %}
    {% endfor %}
    
    {% if administradores %}
        <div class="tabela-wrapper">
            <table class="tabela-dados">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>E-mail</th>
                        <th>Criado em</th>
                        <th>Senha</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in administradores %}
                        <tr>
                            <td>{{ item.id }}</td>
                            <td>{{ item.nome }}</td>
                            <td>{{ item.email }}</td>
                            <td>{{ item.criado_em }}</td>
                            <td>{{ item.senha }}</td>
                            <td class="celula-acoes">
                                <a href="{{ url_for('editar_usuario', usuario_id=item.id) }}" class="btn-editar">Editar</a>
                                <a href="{{ url_for('excluir_usuario', id=item.id) }}" 
                                    class="btn-excluir" 
                                    onclick="return confirm('Tem certeza que deseja excluir este administrador?');">Excluir</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="sem-dados">Nenhum administrador cadastrado.</p>
    {% endif %}
</section>

{% endblock %}